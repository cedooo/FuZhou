<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.com.dhcc.fzep.alarm.data.kyland.Alarmmgrrm">
	<resultMap type="cn.com.dhcc.fzep.alarm.data.kyland.Alarmmgrrm"
		id="AlarmmgrrmResultMap">
		<result column="alarmId" property="alarmId" />
		<result column="NodeType" property="NodeType" />
		<result column="OltId" property="OltId" />
		<result column="SlotId" property="SlotId" />
		<result column="PONIfId" property="PONIfId" />
		<result column="ONUId" property="ONUId" />
		<result column="RMid" property="RMid" />
		<result column="PortType" property="PortType" />
		<result column="MonitorEntityId" property="MonitorEntityId" />
		<result column="VCI" property="VCI" />
		<result column="VPI" property="VPI" />
		<result column="AlarmType" property="AlarmType" />
		<result column="AlarmLevel" property="AlarmLevel" />
		<result column="AlarmKind" property="AlarmKind" />
		<result column="GenTime" property="GenTime" />
		<result column="ClearTime" property="ClearTime" />
		<result column="AffirmTime" property="AffirmTime" />
		<result column="AffirmState" property="AffirmState" />
		<result column="UserIdAffirmer" property="UserIdAffirmer" />
		<result column="ReasonForClear" property="ReasonForClear" />
		<result column="userIdClear" property="userIdClear" />
	</resultMap>
	
	<select id="getAlarm" resultMap="AlarmmgrrmResultMap">
		select * from alarmmgrrm limit 10
	</select>
	
	<select id="queryAlarm" resultMap="AlarmmgrrmResultMap" parameterType="cn.com.dhcc.fzep.alarm.common.AlarmSearchCondition">
		select *
		from alarmmgrrm
		<where>
			<if test="alarmClazz != null">
			state = #{alarmClazz}
			</if>
			<if test="alarmType != null">
			AND AlarmType = #{alarmType}
			</if>
			<if test="alarmLevel != null">
			AND AlarmLevel = #{alarmLevel}
			</if>
			<if test="confirmState != null">
			AND AffirmState = #{confirmState}
			</if>
		</where>
		order by alarmId
		limit ${(page.curPage-1)*page.numPerPage}, #{page.numPerPage}
	</select>
	
</mapper>